{"version":3,"sources":["file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/inlineEditsViews/debugVisualization.ts","vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/inlineEditsViews/debugVisualization.ts"],"names":[],"mappings":"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","file":"debugVisualization.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../../../../../base/common/lifecycle.js';\nimport { IReader, derived } from '../../../../../../../base/common/observable.js';\nimport { Rect } from '../../../../../../common/core/2d/rect.js';\n\nexport interface IVisualizationEffect {\n\tvisualize(): IDisposable;\n}\n\nexport function setVisualization(data: object, visualization: IVisualizationEffect): void {\n\t// eslint-disable-next-line local/code-no-any-casts\n\t(data as any)['$$visualization'] = visualization;\n}\n\nexport function debugLogRects(rects: Record<string, Rect> | Rect[], elem: HTMLElement): object {\n\tif (Array.isArray(rects)) {\n\t\tconst record: Record<string, Rect> = {};\n\t\trects.forEach((rect, index) => {\n\t\t\trecord[index.toString()] = rect;\n\t\t});\n\t\trects = record;\n\t}\n\n\tsetVisualization(rects, new ManyRectVisualizer(rects, elem));\n\treturn rects;\n}\n\nclass ManyRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rects: Record<string, Rect>,\n\t\tprivate readonly _elem: HTMLElement\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst d: IDisposable[] = [];\n\t\tfor (const key in this._rects) {\n\t\t\tconst v = new HtmlRectVisualizer(this._rects[key], this._elem, key);\n\t\t\td.push(v.visualize());\n\t\t}\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\td.forEach(d => d.dispose());\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass HtmlRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rect: Rect,\n\t\tprivate readonly _elem: HTMLElement,\n\t\tprivate readonly _name: string\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst div = document.createElement('div');\n\t\tdiv.style.position = 'fixed';\n\t\tdiv.style.border = '1px solid red';\n\t\tdiv.style.boxSizing = 'border-box';\n\t\tdiv.style.pointerEvents = 'none';\n\t\tdiv.style.zIndex = '100000';\n\n\t\tconst label = document.createElement('div');\n\t\tlabel.textContent = this._name;\n\t\tlabel.style.position = 'absolute';\n\t\tlabel.style.top = '-20px';\n\t\tlabel.style.left = '0';\n\t\tlabel.style.color = 'red';\n\t\tlabel.style.fontSize = '12px';\n\t\tlabel.style.backgroundColor = 'rgba(255, 255, 255, 0.7)';\n\t\tdiv.appendChild(label);\n\n\t\tconst updatePosition = () => {\n\t\t\tconst elemRect = this._elem.getBoundingClientRect();\n\t\t\tconsole.log(elemRect);\n\t\t\tdiv.style.left = (elemRect.left + this._rect.left) + 'px';\n\t\t\tdiv.style.top = (elemRect.top + this._rect.top) + 'px';\n\t\t\tdiv.style.width = this._rect.width + 'px';\n\t\t\tdiv.style.height = this._rect.height + 'px';\n\t\t};\n\n\t\t// This is for debugging only\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tdocument.body.appendChild(div);\n\t\tupdatePosition();\n\n\t\tconst observer = new ResizeObserver(updatePosition);\n\t\tobserver.observe(this._elem);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tdiv.remove();\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport function debugView(value: unknown, reader: IReader): void {\n\tif (typeof value === 'object' && value && '$$visualization' in value) {\n\t\tconst vis = value['$$visualization'] as IVisualizationEffect;\n\t\tdebugReadDisposable(vis.visualize(), reader);\n\t}\n}\n\nfunction debugReadDisposable(d: IDisposable, reader: IReader): void {\n\tderived({ name: 'debugReadDisposable' }, (_reader) => {\n\t\t_reader.store.add(d);\n\t\treturn undefined;\n\t}).read(reader);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../../../../../base/common/lifecycle.js';\nimport { IReader, derived } from '../../../../../../../base/common/observable.js';\nimport { Rect } from '../../../../../../common/core/2d/rect.js';\n\nexport interface IVisualizationEffect {\n\tvisualize(): IDisposable;\n}\n\nexport function setVisualization(data: object, visualization: IVisualizationEffect): void {\n\t// eslint-disable-next-line local/code-no-any-casts\n\t(data as any)['$$visualization'] = visualization;\n}\n\nexport function debugLogRects(rects: Record<string, Rect> | Rect[], elem: HTMLElement): object {\n\tif (Array.isArray(rects)) {\n\t\tconst record: Record<string, Rect> = {};\n\t\trects.forEach((rect, index) => {\n\t\t\trecord[index.toString()] = rect;\n\t\t});\n\t\trects = record;\n\t}\n\n\tsetVisualization(rects, new ManyRectVisualizer(rects, elem));\n\treturn rects;\n}\n\nclass ManyRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rects: Record<string, Rect>,\n\t\tprivate readonly _elem: HTMLElement\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst d: IDisposable[] = [];\n\t\tfor (const key in this._rects) {\n\t\t\tconst v = new HtmlRectVisualizer(this._rects[key], this._elem, key);\n\t\t\td.push(v.visualize());\n\t\t}\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\td.forEach(d => d.dispose());\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass HtmlRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rect: Rect,\n\t\tprivate readonly _elem: HTMLElement,\n\t\tprivate readonly _name: string\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst div = document.createElement('div');\n\t\tdiv.style.position = 'fixed';\n\t\tdiv.style.border = '1px solid red';\n\t\tdiv.style.boxSizing = 'border-box';\n\t\tdiv.style.pointerEvents = 'none';\n\t\tdiv.style.zIndex = '100000';\n\n\t\tconst label = document.createElement('div');\n\t\tlabel.textContent = this._name;\n\t\tlabel.style.position = 'absolute';\n\t\tlabel.style.top = '-20px';\n\t\tlabel.style.left = '0';\n\t\tlabel.style.color = 'red';\n\t\tlabel.style.fontSize = '12px';\n\t\tlabel.style.backgroundColor = 'rgba(255, 255, 255, 0.7)';\n\t\tdiv.appendChild(label);\n\n\t\tconst updatePosition = () => {\n\t\t\tconst elemRect = this._elem.getBoundingClientRect();\n\t\t\tconsole.log(elemRect);\n\t\t\tdiv.style.left = (elemRect.left + this._rect.left) + 'px';\n\t\t\tdiv.style.top = (elemRect.top + this._rect.top) + 'px';\n\t\t\tdiv.style.width = this._rect.width + 'px';\n\t\t\tdiv.style.height = this._rect.height + 'px';\n\t\t};\n\n\t\t// This is for debugging only\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tdocument.body.appendChild(div);\n\t\tupdatePosition();\n\n\t\tconst observer = new ResizeObserver(updatePosition);\n\t\tobserver.observe(this._elem);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tdiv.remove();\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport function debugView(value: unknown, reader: IReader): void {\n\tif (typeof value === 'object' && value && '$$visualization' in value) {\n\t\tconst vis = value['$$visualization'] as IVisualizationEffect;\n\t\tdebugReadDisposable(vis.visualize(), reader);\n\t}\n}\n\nfunction debugReadDisposable(d: IDisposable, reader: IReader): void {\n\tderived({ name: 'debugReadDisposable' }, (_reader) => {\n\t\t_reader.store.add(d);\n\t\treturn undefined;\n\t}).read(reader);\n}\n"]}
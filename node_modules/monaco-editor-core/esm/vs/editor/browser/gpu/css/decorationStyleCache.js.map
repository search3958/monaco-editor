{"version":3,"sources":["file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/gpu/css/decorationStyleCache.ts","vs/editor/browser/gpu/css/decorationStyleCache.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,OAAO,EAAE,MAAM,gCAAgC,CAAC;AAoCzD,MAAM,OAAO,oBAAoB;IAAjC;QAES,YAAO,GAAG,CAAC,CAAC;QAEH,eAAU,GAAG,IAAI,GAAG,EAAsC,CAAC;QAC3D,kBAAa,GAAG,IAAI,OAAO,EAAgF,CAAC;IAoD9H,CAAC;IAlDA,gBAAgB,CACf,KAAyB,EACzB,IAAyB,EACzB,OAA2B,EAC3B,aAAkC,EAClC,sBAA0C,EAC1C,kBAAsC;QAEtC,IAAI,KAAK,KAAK,SAAS,IAAI,IAAI,KAAK,SAAS,IAAI,OAAO,KAAK,SAAS,IAAI,aAAa,KAAK,SAAS,IAAI,sBAAsB,KAAK,SAAS,IAAI,kBAAkB,KAAK,SAAS,EAAE,CAAC;YACnL,OAAO,CAAC,CAAC;QACV,CAAC;QACD,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CACpC,KAAK,IAAI,CAAC,EACV,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACZ,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAC/C,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACrB,sBAAsB,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC,EAC7E,kBAAkB,IAAI,CAAC,CACvB,CAAC;QACF,IAAI,MAAM,EAAE,CAAC;YACZ,OAAO,MAAM,CAAC,EAAE,CAAC;QAClB,CAAC;QACD,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC1B,MAAM,KAAK,GAA+B;YACzC,EAAE;YACF,KAAK;YACL,IAAI;YACJ,OAAO;YACP,aAAa;YACb,sBAAsB;YACtB,kBAAkB;SAClB,CAAC;QACF,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,EAC3B,KAAK,IAAI,CAAC,EACV,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACZ,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAC/C,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EACrB,sBAAsB,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC,EAC7E,kBAAkB,IAAI,CAAC,CACvB,CAAC;QACF,OAAO,EAAE,CAAC;IACX,CAAC;IAED,WAAW,CAAC,EAAU;QACrB,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC;YACd,OAAO,SAAS,CAAC;QAClB,CAAC;QACD,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAChC,CAAC;CACD","file":"decorationStyleCache.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { NKeyMap } from '../../../../base/common/map.js';\n\nexport interface IDecorationStyleSet {\n\t/**\n\t * A 24-bit number representing `color`.\n\t */\n\tcolor: number | undefined;\n\t/**\n\t * Whether the text should be rendered in bold.\n\t */\n\tbold: boolean | undefined;\n\t/**\n\t * A number between 0 and 1 representing the opacity of the text.\n\t */\n\topacity: number | undefined;\n\t/**\n\t * Whether the text should be rendered with a strikethrough.\n\t */\n\tstrikethrough: boolean | undefined;\n\t/**\n\t * The thickness of the strikethrough line in pixels (CSS pixels, not device pixels).\n\t */\n\tstrikethroughThickness: number | undefined;\n\t/**\n\t * A 32-bit number representing the strikethrough color.\n\t */\n\tstrikethroughColor: number | undefined;\n}\n\nexport interface IDecorationStyleCacheEntry extends IDecorationStyleSet {\n\t/**\n\t * A unique identifier for this set of styles.\n\t */\n\tid: number;\n}\n\nexport class DecorationStyleCache {\n\n\tprivate _nextId = 1;\n\n\tprivate readonly _cacheById = new Map<number, IDecorationStyleCacheEntry>();\n\tprivate readonly _cacheByStyle = new NKeyMap<IDecorationStyleCacheEntry, [number, number, string, number, string, number]>();\n\n\tgetOrCreateEntry(\n\t\tcolor: number | undefined,\n\t\tbold: boolean | undefined,\n\t\topacity: number | undefined,\n\t\tstrikethrough: boolean | undefined,\n\t\tstrikethroughThickness: number | undefined,\n\t\tstrikethroughColor: number | undefined\n\t): number {\n\t\tif (color === undefined && bold === undefined && opacity === undefined && strikethrough === undefined && strikethroughThickness === undefined && strikethroughColor === undefined) {\n\t\t\treturn 0;\n\t\t}\n\t\tconst result = this._cacheByStyle.get(\n\t\t\tcolor ?? 0,\n\t\t\tbold ? 1 : 0,\n\t\t\topacity === undefined ? '' : opacity.toFixed(2),\n\t\t\tstrikethrough ? 1 : 0,\n\t\t\tstrikethroughThickness === undefined ? '' : strikethroughThickness.toFixed(2),\n\t\t\tstrikethroughColor ?? 0\n\t\t);\n\t\tif (result) {\n\t\t\treturn result.id;\n\t\t}\n\t\tconst id = this._nextId++;\n\t\tconst entry: IDecorationStyleCacheEntry = {\n\t\t\tid,\n\t\t\tcolor,\n\t\t\tbold,\n\t\t\topacity,\n\t\t\tstrikethrough,\n\t\t\tstrikethroughThickness,\n\t\t\tstrikethroughColor,\n\t\t};\n\t\tthis._cacheById.set(id, entry);\n\t\tthis._cacheByStyle.set(entry,\n\t\t\tcolor ?? 0,\n\t\t\tbold ? 1 : 0,\n\t\t\topacity === undefined ? '' : opacity.toFixed(2),\n\t\t\tstrikethrough ? 1 : 0,\n\t\t\tstrikethroughThickness === undefined ? '' : strikethroughThickness.toFixed(2),\n\t\t\tstrikethroughColor ?? 0\n\t\t);\n\t\treturn id;\n\t}\n\n\tgetStyleSet(id: number): IDecorationStyleSet | undefined {\n\t\tif (id === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._cacheById.get(id);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { NKeyMap } from '../../../../base/common/map.js';\n\nexport interface IDecorationStyleSet {\n\t/**\n\t * A 24-bit number representing `color`.\n\t */\n\tcolor: number | undefined;\n\t/**\n\t * Whether the text should be rendered in bold.\n\t */\n\tbold: boolean | undefined;\n\t/**\n\t * A number between 0 and 1 representing the opacity of the text.\n\t */\n\topacity: number | undefined;\n\t/**\n\t * Whether the text should be rendered with a strikethrough.\n\t */\n\tstrikethrough: boolean | undefined;\n\t/**\n\t * The thickness of the strikethrough line in pixels (CSS pixels, not device pixels).\n\t */\n\tstrikethroughThickness: number | undefined;\n\t/**\n\t * A 32-bit number representing the strikethrough color.\n\t */\n\tstrikethroughColor: number | undefined;\n}\n\nexport interface IDecorationStyleCacheEntry extends IDecorationStyleSet {\n\t/**\n\t * A unique identifier for this set of styles.\n\t */\n\tid: number;\n}\n\nexport class DecorationStyleCache {\n\n\tprivate _nextId = 1;\n\n\tprivate readonly _cacheById = new Map<number, IDecorationStyleCacheEntry>();\n\tprivate readonly _cacheByStyle = new NKeyMap<IDecorationStyleCacheEntry, [number, number, string, number, string, number]>();\n\n\tgetOrCreateEntry(\n\t\tcolor: number | undefined,\n\t\tbold: boolean | undefined,\n\t\topacity: number | undefined,\n\t\tstrikethrough: boolean | undefined,\n\t\tstrikethroughThickness: number | undefined,\n\t\tstrikethroughColor: number | undefined\n\t): number {\n\t\tif (color === undefined && bold === undefined && opacity === undefined && strikethrough === undefined && strikethroughThickness === undefined && strikethroughColor === undefined) {\n\t\t\treturn 0;\n\t\t}\n\t\tconst result = this._cacheByStyle.get(\n\t\t\tcolor ?? 0,\n\t\t\tbold ? 1 : 0,\n\t\t\topacity === undefined ? '' : opacity.toFixed(2),\n\t\t\tstrikethrough ? 1 : 0,\n\t\t\tstrikethroughThickness === undefined ? '' : strikethroughThickness.toFixed(2),\n\t\t\tstrikethroughColor ?? 0\n\t\t);\n\t\tif (result) {\n\t\t\treturn result.id;\n\t\t}\n\t\tconst id = this._nextId++;\n\t\tconst entry: IDecorationStyleCacheEntry = {\n\t\t\tid,\n\t\t\tcolor,\n\t\t\tbold,\n\t\t\topacity,\n\t\t\tstrikethrough,\n\t\t\tstrikethroughThickness,\n\t\t\tstrikethroughColor,\n\t\t};\n\t\tthis._cacheById.set(id, entry);\n\t\tthis._cacheByStyle.set(entry,\n\t\t\tcolor ?? 0,\n\t\t\tbold ? 1 : 0,\n\t\t\topacity === undefined ? '' : opacity.toFixed(2),\n\t\t\tstrikethrough ? 1 : 0,\n\t\t\tstrikethroughThickness === undefined ? '' : strikethroughThickness.toFixed(2),\n\t\t\tstrikethroughColor ?? 0\n\t\t);\n\t\treturn id;\n\t}\n\n\tgetStyleSet(id: number): IDecorationStyleSet | undefined {\n\t\tif (id === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._cacheById.get(id);\n\t}\n}\n"]}
{"version":3,"sources":["file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/common/services/completionsEnablement.ts","vs/editor/common/services/completionsEnablement.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,OAAO,MAAM,6CAA6C,CAAC;AAClE,OAAO,EAAE,QAAQ,EAAE,MAAM,+BAA+B,CAAC;AAIzD;;GAEG;AACH,SAAS,mCAAmC;IAC3C,OAAO,OAAO,CAAC,gBAAgB,EAAE,4BAA4B,CAAC;AAC/D,CAAC;AAED;;;;;;;GAOG;AACH,MAAM,UAAU,0CAA0C,CAAC,oBAAuD,EAAE,QAAa,EAAE,SAAiB,GAAG;IACtJ,MAAM,WAAW,GAAG,mCAAmC,EAAE,CAAC;IAC1D,IAAI,CAAC,WAAW,EAAE,CAAC;QAClB,OAAO,KAAK,CAAC;IACd,CAAC;IAED,uDAAuD;IACvD,OAAO,8BAA8B,CACpC,oBAAoB,CAAC,QAAQ,CAA0B,QAAQ,EAAE,WAAW,CAAC,EAC7E,MAAM,CACN,CAAC;AACH,CAAC;AAED;;;;;;;GAOG;AACH,MAAM,UAAU,8BAA8B,CAAC,2BAAgE,EAAE,SAAiB,GAAG;IACpI,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC,EAAE,CAAC;QAC5C,OAAO,KAAK,CAAC,CAAC,kDAAkD;IACjE,CAAC;IAED,IAAI,OAAO,2BAA2B,CAAC,MAAM,CAAC,KAAK,WAAW,EAAE,CAAC;QAChE,OAAO,OAAO,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,wCAAwC;IAC9F,CAAC;IAED,OAAO,OAAO,CAAC,2BAA2B,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,uCAAuC;AAC1F,CAAC","file":"completionsEnablement.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport product from '../../../platform/product/common/product.js';\nimport { isObject } from '../../../base/common/types.js';\nimport { ITextResourceConfigurationService } from './textResourceConfiguration.js';\nimport { URI } from '../../../base/common/uri.js';\n\n/**\n * Get the completions enablement setting name from product configuration.\n */\nfunction getCompletionsEnablementSettingName(): string | undefined {\n\treturn product.defaultChatAgent?.completionsEnablementSetting;\n}\n\n/**\n * Checks if completions (e.g., Copilot) are enabled for a given language ID\n * using `ITextResourceConfigurationService`.\n *\n * @param configurationService The text resource configuration service to read settings from.\n * @param modeId The language ID to check. Defaults to '*' which checks the global setting.\n * @returns `true` if completions are enabled for the language, `false` otherwise.\n */\nexport function isCompletionsEnabledWithTextResourceConfig(configurationService: ITextResourceConfigurationService, resource: URI, modeId: string = '*'): boolean {\n\tconst settingName = getCompletionsEnablementSettingName();\n\tif (!settingName) {\n\t\treturn false;\n\t}\n\n\t// Pass undefined as resource to get the global setting\n\treturn isCompletionsEnabledFromObject(\n\t\tconfigurationService.getValue<Record<string, boolean>>(resource, settingName),\n\t\tmodeId\n\t);\n}\n\n/**\n * Checks if completions are enabled for a given language ID using a pre-fetched\n * completions enablement object.\n *\n * @param completionsEnablementObject The object containing per-language enablement settings.\n * @param modeId The language ID to check. Defaults to '*' which checks the global setting.\n * @returns `true` if completions are enabled for the language, `false` otherwise.\n */\nexport function isCompletionsEnabledFromObject(completionsEnablementObject: Record<string, boolean> | undefined, modeId: string = '*'): boolean {\n\tif (!isObject(completionsEnablementObject)) {\n\t\treturn false; // default to disabled if setting is not available\n\t}\n\n\tif (typeof completionsEnablementObject[modeId] !== 'undefined') {\n\t\treturn Boolean(completionsEnablementObject[modeId]); // go with setting if explicitly defined\n\t}\n\n\treturn Boolean(completionsEnablementObject['*']); // fallback to global setting otherwise\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport product from '../../../platform/product/common/product.js';\nimport { isObject } from '../../../base/common/types.js';\nimport { ITextResourceConfigurationService } from './textResourceConfiguration.js';\nimport { URI } from '../../../base/common/uri.js';\n\n/**\n * Get the completions enablement setting name from product configuration.\n */\nfunction getCompletionsEnablementSettingName(): string | undefined {\n\treturn product.defaultChatAgent?.completionsEnablementSetting;\n}\n\n/**\n * Checks if completions (e.g., Copilot) are enabled for a given language ID\n * using `ITextResourceConfigurationService`.\n *\n * @param configurationService The text resource configuration service to read settings from.\n * @param modeId The language ID to check. Defaults to '*' which checks the global setting.\n * @returns `true` if completions are enabled for the language, `false` otherwise.\n */\nexport function isCompletionsEnabledWithTextResourceConfig(configurationService: ITextResourceConfigurationService, resource: URI, modeId: string = '*'): boolean {\n\tconst settingName = getCompletionsEnablementSettingName();\n\tif (!settingName) {\n\t\treturn false;\n\t}\n\n\t// Pass undefined as resource to get the global setting\n\treturn isCompletionsEnabledFromObject(\n\t\tconfigurationService.getValue<Record<string, boolean>>(resource, settingName),\n\t\tmodeId\n\t);\n}\n\n/**\n * Checks if completions are enabled for a given language ID using a pre-fetched\n * completions enablement object.\n *\n * @param completionsEnablementObject The object containing per-language enablement settings.\n * @param modeId The language ID to check. Defaults to '*' which checks the global setting.\n * @returns `true` if completions are enabled for the language, `false` otherwise.\n */\nexport function isCompletionsEnabledFromObject(completionsEnablementObject: Record<string, boolean> | undefined, modeId: string = '*'): boolean {\n\tif (!isObject(completionsEnablementObject)) {\n\t\treturn false; // default to disabled if setting is not available\n\t}\n\n\tif (typeof completionsEnablementObject[modeId] !== 'undefined') {\n\t\treturn Boolean(completionsEnablementObject[modeId]); // go with setting if explicitly defined\n\t}\n\n\treturn Boolean(completionsEnablementObject['*']); // fallback to global setting otherwise\n}\n"]}
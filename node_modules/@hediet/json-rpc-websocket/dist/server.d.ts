import * as WebSocket from "ws";
import { WebSocketTransport } from "./index";
import * as http from "http";
import * as https from "https";
import { IEvent } from "@hediet/json-rpc";
export interface StartWebSocketServerOptions {
    /**
     * Where to listen on.
     * Use `port` to listen on a specific or random port.
     * Use `server` to listen on an existing server.
     */
    listenOn: {
        port: number | "random";
    } | {
        server: http.Server | https.Server;
    };
}
/**
 * Starts a new web socket server.
 * Use `handleConnection` to handle the streams of incoming connections.
 */
export declare function startWebSocketServer(options: StartWebSocketServerOptions, handleConnection: (stream: WebSocketTransport) => void): WebSocketServer;
/**
 * Wraps a websocket server.
 */
export declare class WebSocketServer {
    private readonly server;
    constructor(server: WebSocket.Server);
    /**
     * Is resolved once the socket is listening.
     */
    readonly onListening: Promise<void>;
    readonly onError: IEvent<Error>;
    /**
     * Gets the port the websocket server is running on.
     */
    get port(): number;
    /**
     * Closes the server.
     */
    close(): void;
    /**
     * Same as `close`.
     */
    dispose(): void;
}
//# sourceMappingURL=server.d.ts.map